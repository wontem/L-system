{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 627b4ba0604d7d8996cf","webpack:///d:/repos/LSystem/entry.js","webpack:///d:/repos/LSystem/wrapLSystem.js","webpack:///d:/repos/LSystem/lSystem.js","webpack:///d:/repos/LSystem/Vector.js","webpack:///d:/repos/LSystem/Store.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_wrapLSystemJs","_wrapLSystemJs2","cvs","document","createElement","ctx","getContext","width","height","body","appendChild","grammar","type","axiom","split","rules","X","F","tokensAlphabet","+","-","[","]","parameters","generation","maxGeneration","initialState","angle","Math","PI","argumentsAlphabet","angleA","angleB","draw","getCtx","canvas","translate","scale","lineWidth","getOnStateChange","generate","render","state","previousState","getReducer","action","undefined","_extends","payload","wrapLSystem","_ref","_lSystem2","store","_Store2","listenMouse","elem","pressed","lastPos","addEventListener","e","window","pos","x","pageX","y","pageY","diff","_Vector2","dispatch","delta","deltaY","abs","Object","defineProperty","value","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","_lSystem","_Store","_Vector","_toConsumableArray","arr","Array","isArray","arr2","from","getTokens","tokens","allowedTokens","newTokens","forEach","token","toAdd","rule","indexOf","Error","concat","generateTokens","keys","parseCommand","command","actionsAlphabet","_command$replace$split","replace","_command$replace$split2","_slicedToArray","actionName","args","getCommandsAlphabet","commandsAlphabet","commands","run","point","_commandsAlphabet$command","map","arg","apply","defineLanguage","ACTIONS","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","push","err","TypeError","curve","save","prevState","restore","rotate","color","_color","strokeStyle","forward","vector","fromPolar","nextState","sum","beginPath","moveTo","lineTo","stroke","magnitude","cos","sin","a","b","scalarMul","s","_classCallCheck","instance","Constructor","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","Store","reducer","onChange","this","get","_state","set","newState"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _wrapLSystemJs = __webpack_require__(1);\n\t\n\tvar _wrapLSystemJs2 = _interopRequireDefault(_wrapLSystemJs);\n\t\n\tvar cvs = document.createElement('canvas');\n\tvar ctx = cvs.getContext('2d');\n\t\n\tcvs.width = 1000;\n\tcvs.height = 1000;\n\tdocument.body.appendChild(cvs);\n\t\n\t/////////////////////////\n\t// sierpinski triangle //\n\t/////////////////////////\n\t\n\t// wrapLSystem({\n\t// \tgrammar: {\n\t// \t\ttype: 'curve',\n\t// \t\taxiom: ['A'],\n\t// \t\trules: {\n\t// \t\t\t'A': '+B-A-B+'.split(''),\n\t// \t\t\t'B': '-A+B+A-'.split(''),\n\t// \t\t},\n\t// \t\ttokensAlphabet: {\n\t// \t\t\t'A': ['forward: draw'],\n\t// \t\t\t'B': ['forward: draw'],\n\t// \t\t\t'+': ['rotate: angleA'],\n\t// \t\t\t'-': ['rotate: angleB'],\n\t// \t\t},\n\t// \t},\n\t// \tparameters: {\n\t// \t\tgeneration: 4,\n\t// \t\tmaxGeneration: 5,\n\t// \t\targumentsAlphabet: {\n\t// \t\t\tangleA: Math.PI / 3,\n\t// \t\t\tangleB: -Math.PI / 3,\n\t// \t\t\tdraw: true,\n\t// \t\t},\n\t// \t},\n\t// \tgetCtx: (ctx => {\n\t// \t\treturn () => {\n\t// \t\t\tctx.canvas.width = ctx.canvas.width;\n\t// \t\t\tctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);\n\t// \t\t\tctx.scale(10, 10);\n\t// \t\t\tctx.lineWidth = 1/10;\n\t\n\t// \t\t\treturn ctx;\n\t// \t\t}\n\t// \t})(ctx),\n\t// });\n\t\n\t//////////////////////\n\t// pithagoras three //\n\t//////////////////////\n\t\n\t// wrapLSystem({\n\t// \tgrammar: {\n\t// \t\ttype: 'curve',\n\t// \t\taxiom: ['0'],\n\t// \t\trules: {\n\t// \t\t\t'0': ['1', '[', '0', ']', '0'],\n\t// \t\t\t'1': ['1', '1'],\n\t// \t\t},\n\t// \t\ttokensAlphabet: {\n\t// \t\t\t'[': ['save', 'rotate: angleA'],\n\t// \t\t\t']': ['restore', 'rotate: angleB'],\n\t// \t\t\t'0': ['color: colorA', 'forward: draw'],\n\t// \t\t\t'1': ['color: colorB', 'forward: draw'],\n\t// \t\t},\n\t// \t},\n\t// \tparameters: {\n\t// \t\tgeneration: 4,\n\t// \t\tmaxGeneration: 10,\n\t// \t\tinitialState: {\n\t// \t\t\tangle: -Math.PI / 2,\n\t// \t\t},\n\t// \t\targumentsAlphabet: {\n\t// \t\t\tangleA: Math.PI / 4,\n\t// \t\t\tangleB: -Math.PI / 4,\n\t// \t\t\tcolorA: 'green',\n\t// \t\t\tcolorB: 'brown',\n\t// \t\t\tdraw: true,\n\t// \t\t},\n\t// \t},\n\t// \tgetCtx: (ctx => {\n\t// \t\treturn () => {\n\t// \t\t\tctx.canvas.width = ctx.canvas.width;\n\t// \t\t\tctx.translate(ctx.canvas.width / 2, ctx.canvas.height);\n\t// \t\t\tctx.scale(10, 10);\n\t// \t\t\tctx.lineWidth = 1/10;\n\t\n\t// \t\t\treturn ctx;\n\t// \t\t}\n\t// \t})(ctx),\n\t// });\n\t\n\t//////////////////\n\t// dragon curve //\n\t//////////////////\n\t\n\t// wrapLSystem({\n\t// \tgrammar: {\n\t// \t\ttype: 'curve',\n\t// \t\taxiom: ['F', 'X'],\n\t// \t\trules: {\n\t// \t\t\t'X': 'X+YF+'.split(''),\n\t// \t\t\t'Y': '-FX-Y'.split(''),\n\t// \t\t},\n\t// \t\ttokensAlphabet: {\n\t// \t\t\t'X': [],\n\t// \t\t\t'Y': [],\n\t// \t\t\t'F': ['forward: draw'],\n\t// \t\t\t'+': ['rotate: angleA'],\n\t// \t\t\t'-': ['rotate: angleB'],\n\t// \t\t},\n\t// \t},\n\t// \tparameters: {\n\t// \t\tgeneration: 4,\n\t// \t\tmaxGeneration: 10,\n\t// \t\tinitialState: {\n\t// \t\t\tangle: -Math.PI / 2,\n\t// \t\t},\n\t// \t\targumentsAlphabet: {\n\t// \t\t\tangleA: Math.PI / 180 * 90,\n\t// \t\t\tangleB: -Math.PI / 180 * 90,\n\t// \t\t\tdraw: true,\n\t// \t\t},\n\t// \t},\n\t// \tgetCtx: (ctx => {\n\t// \t\treturn () => {\n\t// \t\t\tctx.canvas.width = ctx.canvas.width;\n\t// \t\t\tctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);\n\t// \t\t\tctx.scale(10, 10);\n\t// \t\t\tctx.lineWidth = 1/10;\n\t\n\t// \t\t\treturn ctx;\n\t// \t\t}\n\t// \t})(ctx),\n\t// });\n\t\n\t///////////\n\t// plant //\n\t///////////\n\t\n\t(0, _wrapLSystemJs2['default'])({\n\t\tgrammar: {\n\t\t\ttype: 'curve',\n\t\t\taxiom: 'X'.split(''),\n\t\t\trules: {\n\t\t\t\t'X': 'F-[[X]+X]+F[+FX]-X'.split(''),\n\t\t\t\t'F': 'FF'.split('')\n\t\t\t},\n\t\t\ttokensAlphabet: {\n\t\t\t\t'X': [],\n\t\t\t\t'F': ['forward: draw'],\n\t\t\t\t'+': ['rotate: angleA'],\n\t\t\t\t'-': ['rotate: angleB'],\n\t\t\t\t'[': ['save'],\n\t\t\t\t']': ['restore']\n\t\t\t}\n\t\t},\n\t\tparameters: {\n\t\t\tgeneration: 4,\n\t\t\tmaxGeneration: 5,\n\t\t\tinitialState: {\n\t\t\t\tangle: -Math.PI / 2\n\t\t\t},\n\t\t\targumentsAlphabet: {\n\t\t\t\tangleA: Math.PI / 180 * 25,\n\t\t\t\tangleB: -Math.PI / 180 * 25,\n\t\t\t\tdraw: true\n\t\t\t}\n\t\t},\n\t\tgetCtx: (function (ctx) {\n\t\t\treturn function () {\n\t\t\t\tctx.canvas.width = ctx.canvas.width;\n\t\t\t\tctx.translate(ctx.canvas.width / 2, ctx.canvas.height);\n\t\t\t\tctx.scale(10, 10);\n\t\t\t\tctx.lineWidth = 1 / 10;\n\t\n\t\t\t\treturn ctx;\n\t\t\t};\n\t\t})(ctx)\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = wrapLSystem;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _lSystem = __webpack_require__(2);\n\t\n\tvar _lSystem2 = _interopRequireDefault(_lSystem);\n\t\n\tvar _Store = __webpack_require__(4);\n\t\n\tvar _Store2 = _interopRequireDefault(_Store);\n\t\n\tvar _Vector = __webpack_require__(3);\n\t\n\tvar _Vector2 = _interopRequireDefault(_Vector);\n\t\n\tfunction getOnStateChange(getCtx, generate) {\n\t\tvar render;\n\t\n\t\treturn function onStateChange(state, previousState) {\n\t\t\tvar ctx = getCtx();\n\t\n\t\t\tif (state.generation !== previousState.generation) {\n\t\t\t\trender = generate(state.generation);\n\t\t\t}\n\t\n\t\t\trender(ctx, state.initialState, state.argumentsAlphabet);\n\t\t};\n\t}\n\t\n\tfunction getReducer(parameters) {\n\t\treturn function reducer(state, action) {\n\t\t\tif (state === undefined) state = parameters;\n\t\n\t\t\tswitch (action.type) {\n\t\t\t\tcase 'changeAngles':\n\t\t\t\t\treturn _extends({}, state, {\n\t\t\t\t\t\targumentsAlphabet: _extends({}, state.argumentsAlphabet, {\n\t\t\t\t\t\t\tangleA: state.argumentsAlphabet.angleA + action.payload.angleA,\n\t\t\t\t\t\t\tangleB: state.argumentsAlphabet.angleB + action.payload.angleB\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\tcase 'changeGeneration':\n\t\t\t\t\tvar generation = state.generation + action.payload;\n\t\t\t\t\tif (generation > (state.maxGeneration || 5) || generation < 0) {\n\t\t\t\t\t\treturn state;\n\t\t\t\t\t}\n\t\t\t\t\treturn _extends({}, state, {\n\t\t\t\t\t\tgeneration: generation,\n\t\t\t\t\t\targumentsAlphabet: _extends({}, state.argumentsAlphabet)\n\t\t\t\t\t});\n\t\t\t\tdefault:\n\t\t\t\t\treturn state;\n\t\t\t}\n\t\t};\n\t}\n\t\n\tfunction wrapLSystem(_ref) {\n\t\tvar grammar = _ref.grammar;\n\t\tvar parameters = _ref.parameters;\n\t\tvar getCtx = _ref.getCtx;\n\t\n\t\tvar ctx = getCtx();\n\t\tvar generate = (0, _lSystem2['default'])(grammar);\n\t\tvar store = new _Store2['default'](getReducer(parameters), getOnStateChange(getCtx, generate));\n\t\tlistenMouse(ctx.canvas, store);\n\t}\n\t\n\tfunction listenMouse(elem, store) {\n\t\tvar pressed = false;\n\t\tvar lastPos = null;\n\t\n\t\telem.addEventListener('mousedown', function (e) {\n\t\t\tpressed = true;\n\t\t});\n\t\n\t\twindow.addEventListener('mousemove', function (e) {\n\t\t\tvar pos = {\n\t\t\t\tx: e.pageX,\n\t\t\t\ty: e.pageY\n\t\t\t};\n\t\n\t\t\tif (pressed && lastPos) {\n\t\t\t\tvar diff = _Vector2['default'].diff(pos, lastPos);\n\t\t\t\tstore.dispatch({\n\t\t\t\t\ttype: 'changeAngles',\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\tangleA: (diff.x + diff.y) / 1000,\n\t\t\t\t\t\tangleB: (diff.x - diff.y) / 1000\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\tlastPos = pos;\n\t\t});\n\t\n\t\twindow.addEventListener('mouseup', function (e) {\n\t\t\tpressed = false;\n\t\t});\n\t\n\t\telem.addEventListener('wheel', function (e) {\n\t\t\tvar delta = -e.deltaY / Math.abs(e.deltaY);\n\t\n\t\t\tstore.dispatch({\n\t\t\t\ttype: 'changeGeneration',\n\t\t\t\tpayload: delta\n\t\t\t});\n\t\t});\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = defineLanguage;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\t\n\tvar _Vector = __webpack_require__(3);\n\t\n\tvar _Vector2 = _interopRequireDefault(_Vector);\n\t\n\tvar ACTIONS = {\n\t\tcurve: {\n\t\t\tsave: function save(state, ctx) {\n\t\t\t\treturn _extends({}, state, {\n\t\t\t\t\tprevState: state\n\t\t\t\t});\n\t\t\t},\n\t\n\t\t\trestore: function restore(state, ctx) {\n\t\t\t\treturn _extends({}, state.prevState);\n\t\t\t},\n\t\n\t\t\trotate: function rotate(state, ctx, angle) {\n\t\t\t\treturn _extends({}, state, {\n\t\t\t\t\tangle: state.angle + angle\n\t\t\t\t});\n\t\t\t},\n\t\n\t\t\tcolor: function color(state, ctx) {\n\t\t\t\tvar _color = arguments.length <= 2 || arguments[2] === undefined ? 'black' : arguments[2];\n\t\n\t\t\t\tctx.strokeStyle = _color;\n\t\t\t\treturn state;\n\t\t\t},\n\t\n\t\t\tforward: function forward(state, ctx) {\n\t\t\t\tvar draw = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\t\n\t\t\t\tvar vector = _Vector2['default'].fromPolar(1, state.angle);\n\t\t\t\tvar nextState = _extends({}, state, {\n\t\t\t\t\tpoint: _Vector2['default'].sum(state.point, vector)\n\t\t\t\t});\n\t\n\t\t\t\tif (draw) {\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.moveTo(state.point.x, state.point.y);\n\t\t\t\t\tctx.lineTo(nextState.point.x, nextState.point.y);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\n\t\t\t\treturn nextState;\n\t\t\t}\n\t\t}\n\t};\n\t\n\tfunction getTokens(tokens, rules, allowedTokens) {\n\t\tvar newTokens = [];\n\t\n\t\ttokens.forEach(function (token, i, tokens) {\n\t\t\tvar toAdd = [];\n\t\n\t\t\tif (rules.hasOwnProperty(token)) {\n\t\t\t\tvar rule = rules[token];\n\t\n\t\t\t\tif (typeof rule == 'function') {\n\t\t\t\t\ttoAdd = rule(tokens[i - 1], tokens[i + 1]);\n\t\t\t\t} else {\n\t\t\t\t\ttoAdd = rule;\n\t\t\t\t}\n\t\t\t} else if (allowedTokens.indexOf(token) !== -1) {\n\t\t\t\ttoAdd = token;\n\t\t\t} else {\n\t\t\t\tthrow Error('Unknown token: ' + token);\n\t\t\t}\n\t\n\t\t\tnewTokens = newTokens.concat(toAdd);\n\t\t});\n\t\n\t\treturn newTokens;\n\t}\n\t\n\tfunction generateTokens(grammar, generation) {\n\t\tvar tokens = grammar.axiom;\n\t\tvar allowedTokens = Object.keys(grammar.tokensAlphabet);\n\t\n\t\twhile (generation--) {\n\t\t\ttokens = getTokens(tokens, grammar.rules, allowedTokens);\n\t\t}\n\t\n\t\treturn tokens;\n\t}\n\t\n\tfunction parseCommand(command, actionsAlphabet) {\n\t\tvar _command$replace$split = command.replace(/\\s/g, '').split(':');\n\t\n\t\tvar _command$replace$split2 = _slicedToArray(_command$replace$split, 2);\n\t\n\t\tvar actionName = _command$replace$split2[0];\n\t\tvar args = _command$replace$split2[1];\n\t\n\t\tvar action = actionsAlphabet[actionName];\n\t\targs = args ? args.split(',') : [];\n\t\n\t\t// console.log(`${actionName}(${args.join(', ')})`);\n\t\n\t\treturn { action: action, args: args };\n\t}\n\t\n\tfunction getCommandsAlphabet(tokensAlphabet, actionsAlphabet) {\n\t\tvar commandsAlphabet = {};\n\t\n\t\tfor (var token in tokensAlphabet) {\n\t\t\tvar commands = tokensAlphabet[token];\n\t\t\tvar i = commands.length;\n\t\n\t\t\twhile (i--) {\n\t\t\t\tvar command = commands[i];\n\t\t\t\tcommandsAlphabet[command] = parseCommand(command, actionsAlphabet);\n\t\t\t}\n\t\t}\n\t\n\t\treturn commandsAlphabet;\n\t}\n\t\n\tfunction run(initialState, ctx, tokens, tokensAlphabet, commandsAlphabet, argumentsAlphabet) {\n\t\tvar state = _extends({\n\t\t\tangle: 0,\n\t\t\tpoint: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t}\n\t\t}, initialState);\n\t\n\t\ttokens.forEach(function (token) {\n\t\t\ttokensAlphabet[token].forEach(function (command) {\n\t\t\t\tvar _commandsAlphabet$command = commandsAlphabet[command];\n\t\t\t\tvar action = _commandsAlphabet$command.action;\n\t\t\t\tvar args = _commandsAlphabet$command.args;\n\t\n\t\t\t\targs = args.map(function (arg) {\n\t\t\t\t\treturn argumentsAlphabet[arg];\n\t\t\t\t});\n\t\n\t\t\t\tstate = action.apply(undefined, [state, ctx].concat(_toConsumableArray(args)));\n\t\t\t});\n\t\t});\n\t}\n\t\n\tfunction defineLanguage(grammar) {\n\t\tvar tokensAlphabet = grammar.tokensAlphabet;\n\t\tvar actionsAlphabet = ACTIONS[grammar.type];\n\t\tvar commandsAlphabet = getCommandsAlphabet(tokensAlphabet, actionsAlphabet);\n\t\n\t\treturn function generator(generation) {\n\t\t\tvar tokens = generateTokens(grammar, generation);\n\t\n\t\t\treturn function render(ctx, initialState, argumentsAlphabet) {\n\t\t\t\trun(initialState, ctx, tokens, tokensAlphabet, commandsAlphabet, argumentsAlphabet);\n\t\t\t};\n\t\t};\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports[\"default\"] = {\n\t\tfromPolar: function fromPolar(magnitude, angle) {\n\t\t\treturn {\n\t\t\t\tx: magnitude * Math.cos(angle),\n\t\t\t\ty: magnitude * Math.sin(angle)\n\t\t\t};\n\t\t},\n\t\n\t\tsum: function sum(a, b) {\n\t\t\treturn {\n\t\t\t\tx: a.x + b.x,\n\t\t\t\ty: a.y + b.y\n\t\t\t};\n\t\t},\n\t\n\t\tdiff: function diff(a, b) {\n\t\t\treturn {\n\t\t\t\tx: a.x - b.x,\n\t\t\t\ty: a.y - b.y\n\t\t\t};\n\t\t},\n\t\n\t\tscalarMul: function scalarMul(a, s) {\n\t\t\treturn {\n\t\t\t\tx: a.x * s,\n\t\t\t\ty: a.y * s\n\t\t\t};\n\t\t}\n\t};\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar Store = (function () {\n\t\tfunction Store(reducer, onChange) {\n\t\t\t_classCallCheck(this, Store);\n\t\n\t\t\tthis.reducer = reducer;\n\t\t\tthis.onChange = onChange || function () {};\n\t\n\t\t\tthis.dispatch({\n\t\t\t\ttype: 'init'\n\t\t\t});\n\t\t}\n\t\n\t\t_createClass(Store, [{\n\t\t\tkey: 'dispatch',\n\t\t\tvalue: function dispatch(action) {\n\t\t\t\tthis.state = this.reducer(this.state, action);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'state',\n\t\t\tget: function get() {\n\t\t\t\treturn this._state;\n\t\t\t},\n\t\t\tset: function set(state) {\n\t\t\t\tif (state !== this._state) {\n\t\t\t\t\tvar prevState = this._state || {};\n\t\t\t\t\tvar newState = state;\n\t\n\t\t\t\t\tthis._state = newState;\n\t\t\t\t\tthis.onChange(newState, prevState);\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Store;\n\t})();\n\t\n\texports['default'] = Store;\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** bundle.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 627b4ba0604d7d8996cf\n **/","import wrapLSystem from './wrapLSystem.js';\r\n\r\nvar cvs = document.createElement('canvas');\r\nvar ctx = cvs.getContext('2d');\r\n\r\ncvs.width = 1000;\r\ncvs.height = 1000;\r\ndocument.body.appendChild(cvs);\r\n\r\n\r\n\r\n\r\n\r\n/////////////////////////\r\n// sierpinski triangle //\r\n/////////////////////////\r\n\r\n// wrapLSystem({\r\n// \tgrammar: {\r\n// \t\ttype: 'curve',\r\n// \t\taxiom: ['A'],\r\n// \t\trules: {\r\n// \t\t\t'A': '+B-A-B+'.split(''),\r\n// \t\t\t'B': '-A+B+A-'.split(''),\r\n// \t\t},\r\n// \t\ttokensAlphabet: {\r\n// \t\t\t'A': ['forward: draw'],\r\n// \t\t\t'B': ['forward: draw'],\r\n// \t\t\t'+': ['rotate: angleA'],\r\n// \t\t\t'-': ['rotate: angleB'],\r\n// \t\t},\r\n// \t},\r\n// \tparameters: {\r\n// \t\tgeneration: 4,\r\n// \t\tmaxGeneration: 5,\r\n// \t\targumentsAlphabet: {\r\n// \t\t\tangleA: Math.PI / 3,\r\n// \t\t\tangleB: -Math.PI / 3,\r\n// \t\t\tdraw: true,\r\n// \t\t},\r\n// \t},\r\n// \tgetCtx: (ctx => {\r\n// \t\treturn () => {\r\n// \t\t\tctx.canvas.width = ctx.canvas.width;\r\n// \t\t\tctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);\r\n// \t\t\tctx.scale(10, 10);\r\n// \t\t\tctx.lineWidth = 1/10;\r\n\r\n// \t\t\treturn ctx;\r\n// \t\t}\r\n// \t})(ctx),\r\n// });\r\n\r\n\r\n\r\n//////////////////////\r\n// pithagoras three //\r\n//////////////////////\r\n\r\n\r\n// wrapLSystem({\r\n// \tgrammar: {\r\n// \t\ttype: 'curve',\r\n// \t\taxiom: ['0'],\r\n// \t\trules: {\r\n// \t\t\t'0': ['1', '[', '0', ']', '0'],\r\n// \t\t\t'1': ['1', '1'],\r\n// \t\t},\r\n// \t\ttokensAlphabet: {\r\n// \t\t\t'[': ['save', 'rotate: angleA'],\r\n// \t\t\t']': ['restore', 'rotate: angleB'],\r\n// \t\t\t'0': ['color: colorA', 'forward: draw'],\r\n// \t\t\t'1': ['color: colorB', 'forward: draw'],\r\n// \t\t},\r\n// \t},\r\n// \tparameters: {\r\n// \t\tgeneration: 4,\r\n// \t\tmaxGeneration: 10,\r\n// \t\tinitialState: {\r\n// \t\t\tangle: -Math.PI / 2,\r\n// \t\t},\r\n// \t\targumentsAlphabet: {\r\n// \t\t\tangleA: Math.PI / 4,\r\n// \t\t\tangleB: -Math.PI / 4,\r\n// \t\t\tcolorA: 'green',\r\n// \t\t\tcolorB: 'brown',\r\n// \t\t\tdraw: true,\r\n// \t\t},\r\n// \t},\r\n// \tgetCtx: (ctx => {\r\n// \t\treturn () => {\r\n// \t\t\tctx.canvas.width = ctx.canvas.width;\r\n// \t\t\tctx.translate(ctx.canvas.width / 2, ctx.canvas.height);\r\n// \t\t\tctx.scale(10, 10);\r\n// \t\t\tctx.lineWidth = 1/10;\r\n\r\n// \t\t\treturn ctx;\r\n// \t\t}\r\n// \t})(ctx),\r\n// });\r\n\r\n\r\n\r\n//////////////////\r\n// dragon curve //\r\n//////////////////\r\n\r\n// wrapLSystem({\r\n// \tgrammar: {\r\n// \t\ttype: 'curve',\r\n// \t\taxiom: ['F', 'X'],\r\n// \t\trules: {\r\n// \t\t\t'X': 'X+YF+'.split(''),\r\n// \t\t\t'Y': '-FX-Y'.split(''),\r\n// \t\t},\r\n// \t\ttokensAlphabet: {\r\n// \t\t\t'X': [],\r\n// \t\t\t'Y': [],\r\n// \t\t\t'F': ['forward: draw'],\r\n// \t\t\t'+': ['rotate: angleA'],\r\n// \t\t\t'-': ['rotate: angleB'],\r\n// \t\t},\r\n// \t},\r\n// \tparameters: {\r\n// \t\tgeneration: 4,\r\n// \t\tmaxGeneration: 10,\r\n// \t\tinitialState: {\r\n// \t\t\tangle: -Math.PI / 2,\r\n// \t\t},\r\n// \t\targumentsAlphabet: {\r\n// \t\t\tangleA: Math.PI / 180 * 90,\r\n// \t\t\tangleB: -Math.PI / 180 * 90,\r\n// \t\t\tdraw: true,\r\n// \t\t},\r\n// \t},\r\n// \tgetCtx: (ctx => {\r\n// \t\treturn () => {\r\n// \t\t\tctx.canvas.width = ctx.canvas.width;\r\n// \t\t\tctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);\r\n// \t\t\tctx.scale(10, 10);\r\n// \t\t\tctx.lineWidth = 1/10;\r\n\r\n// \t\t\treturn ctx;\r\n// \t\t}\r\n// \t})(ctx),\r\n// });\r\n\r\n\r\n///////////\r\n// plant //\r\n///////////\r\n\r\nwrapLSystem({\r\n\tgrammar: {\r\n\t\ttype: 'curve',\r\n\t\taxiom: 'X'.split(''),\r\n\t\trules: {\r\n\t\t\t'X': 'F-[[X]+X]+F[+FX]-X'.split(''),\r\n\t\t\t'F': 'FF'.split(''),\r\n\t\t},\r\n\t\ttokensAlphabet: {\r\n\t\t\t'X': [],\r\n\t\t\t'F': ['forward: draw'],\r\n\t\t\t'+': ['rotate: angleA'],\r\n\t\t\t'-': ['rotate: angleB'],\r\n\t\t\t'[': ['save'],\r\n\t\t\t']': ['restore'],\r\n\t\t},\r\n\t},\r\n\tparameters: {\r\n\t\tgeneration: 4,\r\n\t\tmaxGeneration: 5,\r\n\t\tinitialState: {\r\n\t\t\tangle: -Math.PI / 2,\r\n\t\t},\r\n\t\targumentsAlphabet: {\r\n\t\t\tangleA: Math.PI / 180 * 25,\r\n\t\t\tangleB: -Math.PI / 180 * 25,\r\n\t\t\tdraw: true,\r\n\t\t},\r\n\t},\r\n\tgetCtx: (ctx => {\r\n\t\treturn () => {\r\n\t\t\tctx.canvas.width = ctx.canvas.width;\r\n\t\t\tctx.translate(ctx.canvas.width / 2, ctx.canvas.height);\r\n\t\t\tctx.scale(10, 10);\r\n\t\t\tctx.lineWidth = 1/10;\r\n\r\n\t\t\treturn ctx;\r\n\t\t}\r\n\t})(ctx),\r\n});\n\n\n/** WEBPACK FOOTER **\n ** d:/repos/LSystem/entry.js\n **/","import defineLanguage from './lSystem';\r\nimport Store from './Store';\r\nimport V from './Vector';\r\n\r\nfunction getOnStateChange (getCtx, generate) {\r\n\tvar render;\r\n\r\n\treturn function onStateChange (state, previousState) {\r\n\t\tvar ctx = getCtx();\r\n\r\n\t\tif (state.generation !== previousState.generation) {\r\n\t\t\trender = generate(state.generation);\r\n\t\t}\r\n\r\n\t\trender(ctx, state.initialState, state.argumentsAlphabet);\r\n\t};\r\n}\r\n\r\nfunction getReducer (parameters) {\r\n\treturn function reducer (state = parameters, action) {\r\n\t\tswitch (action.type) {\r\n\t\t\tcase 'changeAngles':\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\targumentsAlphabet: {\r\n\t\t\t\t\t\t...state.argumentsAlphabet,\r\n\t\t\t\t\t\tangleA: state.argumentsAlphabet.angleA + action.payload.angleA,\r\n\t\t\t\t\t\tangleB: state.argumentsAlphabet.angleB + action.payload.angleB,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\tcase 'changeGeneration':\r\n\t\t\t\tlet generation = state.generation + action.payload;\r\n\t\t\t\tif (generation > (state.maxGeneration || 5) || generation < 0) {\r\n\t\t\t\t\treturn state;\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tgeneration: generation,\r\n\t\t\t\t\targumentsAlphabet: {\r\n\t\t\t\t\t\t...state.argumentsAlphabet\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\tdefault:\r\n\t\t\t\treturn state;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default function wrapLSystem ({\r\n\tgrammar,\r\n\tparameters,\r\n\tgetCtx,\r\n}) {\r\n\tvar ctx = getCtx();\r\n\tvar generate = defineLanguage(grammar);\r\n\tvar store = new Store(getReducer(parameters), getOnStateChange(getCtx, generate));\r\n\tlistenMouse(ctx.canvas, store);\r\n}\r\n\r\n\r\n\r\nfunction listenMouse (elem, store) {\r\n\tvar pressed = false;\r\n\tvar lastPos = null;\r\n\r\n\telem.addEventListener('mousedown', function (e) {\r\n\t\tpressed = true;\r\n\t});\r\n\r\n\twindow.addEventListener('mousemove', function (e) {\r\n\t\tvar pos = {\r\n\t\t\tx: e.pageX,\r\n\t\t\ty: e.pageY,\r\n\t\t};\r\n\r\n\t\tif (pressed && lastPos) {\r\n\t\t\tlet diff = V.diff(pos, lastPos);\r\n\t\t\tstore.dispatch({\r\n\t\t\t\ttype: 'changeAngles',\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tangleA: (diff.x + diff.y) / 1000,\r\n\t\t\t\t\tangleB: (diff.x - diff.y) / 1000,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlastPos = pos;\r\n\t});\r\n\r\n\twindow.addEventListener('mouseup', function (e) {\r\n\t\tpressed = false;\r\n\t});\r\n\r\n\telem.addEventListener('wheel', function (e) {\r\n\t\tvar delta = -e.deltaY / Math.abs(e.deltaY);\r\n\r\n\t\tstore.dispatch({\r\n\t\t\ttype: 'changeGeneration',\r\n\t\t\tpayload: delta\r\n\t\t});\r\n\t});\r\n};\n\n\n/** WEBPACK FOOTER **\n ** d:/repos/LSystem/wrapLSystem.js\n **/","import V from './Vector';\r\n\r\n\r\nconst ACTIONS = {\r\n\tcurve: {\r\n\t\tsave: function (state, ctx) {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tprevState: state,\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\trestore: function (state, ctx) {\r\n\t\t\treturn {\r\n\t\t\t\t...state.prevState,\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\trotate: function (state, ctx, angle) {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tangle: state.angle + angle,\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tcolor: function (state, ctx, color = 'black') {\r\n\t\t\tctx.strokeStyle = color;\r\n\t\t\treturn state;\r\n\t\t},\r\n\r\n\t\tforward: function (state, ctx, draw = false) {\r\n\t\t\tvar vector = V.fromPolar(1, state.angle);\r\n\t\t\tvar nextState =  {\r\n\t\t\t\t...state,\r\n\t\t\t\tpoint: V.sum(state.point, vector),\r\n\t\t\t};\r\n\r\n\t\t\tif (draw) {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(state.point.x, state.point.y);\r\n\t\t\t\tctx.lineTo(nextState.point.x, nextState.point.y);\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\r\n\t\t\treturn nextState;\r\n\t\t},\r\n\t}\r\n};\r\n\r\n\r\n\r\nfunction getTokens (tokens, rules, allowedTokens) {\r\n\tvar newTokens = [];\r\n\r\n\ttokens.forEach((token, i, tokens) => {\r\n\t\tvar toAdd = [];\r\n\r\n\t\tif (rules.hasOwnProperty(token)) {\r\n\t\t\tlet rule = rules[token];\r\n\r\n\t\t\tif (typeof rule == 'function')  {\r\n\t\t\t\ttoAdd = rule(tokens[i - 1], tokens[i + 1]);\r\n\t\t\t} else {\r\n\t\t\t\ttoAdd = rule;\r\n\t\t\t}\r\n\t\t} else if (allowedTokens.indexOf(token) !== -1) {\r\n\t\t\ttoAdd = token;\r\n\t\t} else {\r\n\t\t\tthrow Error(`Unknown token: ${token}`);\r\n\t\t}\r\n\r\n\t\tnewTokens = newTokens.concat(toAdd);\r\n\t});\r\n\r\n\treturn newTokens;\r\n}\r\n\r\nfunction generateTokens (grammar, generation) {\r\n\tvar tokens = grammar.axiom;\r\n\tvar allowedTokens = Object.keys(grammar.tokensAlphabet);\r\n\r\n\twhile (generation--) {\r\n\t\ttokens = getTokens(tokens, grammar.rules, allowedTokens);\r\n\t}\r\n\r\n\treturn tokens;\r\n}\r\n\r\n\r\nfunction parseCommand (command, actionsAlphabet) {\r\n\tvar [actionName, args] = command.replace(/\\s/g, '').split(':');\r\n\tvar action = actionsAlphabet[actionName];\r\n\targs = args ? args.split(',') : [];\r\n\r\n\t// console.log(`${actionName}(${args.join(', ')})`);\r\n\r\n\treturn { action, args };\r\n}\r\n\r\nfunction getCommandsAlphabet (tokensAlphabet, actionsAlphabet) {\r\n\tvar commandsAlphabet = {};\r\n\r\n\tfor (let token in tokensAlphabet) {\r\n\t\tlet commands = tokensAlphabet[token];\r\n\t\tlet i = commands.length;\r\n\r\n\t\twhile (i--) {\r\n\t\t\tlet command = commands[i];\r\n\t\t\tcommandsAlphabet[command] = parseCommand(command, actionsAlphabet);\r\n\t\t}\r\n\t}\r\n\r\n\treturn commandsAlphabet;\r\n}\r\n\r\nfunction run (initialState, ctx, tokens, tokensAlphabet, commandsAlphabet, argumentsAlphabet) {\r\n\tvar state = {\r\n\t\tangle: 0,\r\n\t\tpoint: {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t},\r\n\t\t...initialState,\r\n\t};\r\n\r\n\ttokens.forEach(token => {\r\n\t\ttokensAlphabet[token].forEach(command => {\r\n\t\t\tvar {action, args} = commandsAlphabet[command];\r\n\t\t\targs = args.map(arg => argumentsAlphabet[arg]);\r\n\r\n\t\t\tstate = action(state, ctx, ...args);\r\n\t\t});\r\n\t});\r\n}\r\n\r\n\r\nexport default function defineLanguage (grammar) {\r\n\tvar tokensAlphabet = grammar.tokensAlphabet;\r\n\tvar actionsAlphabet = ACTIONS[grammar.type];\r\n\tvar commandsAlphabet = getCommandsAlphabet(tokensAlphabet, actionsAlphabet);\r\n\r\n\treturn function generator (generation) {\r\n\t\tvar tokens = generateTokens(grammar, generation);\r\n\r\n\t\treturn function render (ctx, initialState, argumentsAlphabet) {\r\n\t\t\trun(initialState, ctx, tokens, tokensAlphabet, commandsAlphabet, argumentsAlphabet);\r\n\t\t};\r\n\t};\r\n}\n\n\n/** WEBPACK FOOTER **\n ** d:/repos/LSystem/lSystem.js\n **/","export default {\r\n\tfromPolar (magnitude, angle) {\r\n\t\treturn {\r\n\t\t\tx: magnitude * Math.cos(angle),\r\n\t\t\ty: magnitude * Math.sin(angle),\r\n\t\t};\r\n\t},\r\n\r\n\tsum (a, b) {\r\n\t\treturn {\r\n\t\t\tx: a.x + b.x,\r\n\t\t\ty: a.y + b.y,\r\n\t\t};\r\n\t},\r\n\r\n\tdiff (a, b) {\r\n\t\treturn {\r\n\t\t\tx: a.x - b.x,\r\n\t\t\ty: a.y - b.y,\r\n\t\t};\r\n\t},\r\n\r\n\tscalarMul (a, s) {\r\n\t\treturn {\r\n\t\t\tx: a.x * s,\r\n\t\t\ty: a.y * s,\r\n\t\t};\r\n\t},\r\n};\n\n\n/** WEBPACK FOOTER **\n ** d:/repos/LSystem/Vector.js\n **/","export default class Store {\r\n\tconstructor (reducer, onChange) {\r\n\t\tthis.reducer = reducer;\r\n\t\tthis.onChange = onChange || function () {};\r\n\r\n\t\tthis.dispatch({\r\n\t\t\ttype: 'init',\r\n\t\t});\r\n\t}\r\n\r\n\tget state () {\r\n\t\treturn this._state;\r\n\t}\r\n\r\n\tset state (state) {\r\n\t\tif (state !== this._state) {\r\n\t\t\tlet [prevState, newState] = [this._state || {}, state];\r\n\t\t\tthis._state = newState;\r\n\t\t\tthis.onChange(newState, prevState);\r\n\t\t}\r\n\t}\r\n\r\n\tdispatch (action) {\r\n\t\tthis.state = this.reducer(this.state, action);\r\n\t}\r\n};\n\n\n/** WEBPACK FOOTER **\n ** d:/repos/LSystem/Store.js\n **/"],"sourceRoot":""}