!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a=n(1),o=r(a),u=document.createElement("canvas"),i=u.getContext("2d");u.width=1e3,u.height=1e3,document.body.appendChild(u),o["default"]({grammar:{type:"curve",axiom:"X".split(""),rules:{X:"F-[[X]+X]+F[+FX]-X".split(""),F:"FF".split("")},tokensAlphabet:{X:[],F:["forward: draw"],"+":["rotate: angleA"],"-":["rotate: angleB"],"[":["save"],"]":["restore"]}},parameters:{generation:4,maxGeneration:5,initialState:{angle:-Math.PI/2},argumentsAlphabet:{angleA:Math.PI/180*25,angleB:-Math.PI/180*25,draw:!0}},getCtx:function(t){return function(){return t.canvas.width=t.canvas.width,t.translate(t.canvas.width/2,t.canvas.height),t.scale(10,10),t.lineWidth=.1,t}}(i)})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){var n;return function(r,a){var o=t();r.generation!==a.generation&&(n=e(r.generation)),n(o,r.initialState,r.argumentsAlphabet)}}function o(t){return function(e,n){switch(void 0===e&&(e=t),n.type){case"changeAngles":return s({},e,{argumentsAlphabet:s({},e.argumentsAlphabet,{angleA:e.argumentsAlphabet.angleA+n.payload.angleA,angleB:e.argumentsAlphabet.angleB+n.payload.angleB})});case"changeGeneration":var r=e.generation+n.payload;return r>(e.maxGeneration||5)||0>r?e:s({},e,{generation:r,argumentsAlphabet:s({},e.argumentsAlphabet)});default:return e}}}function u(t){var e=t.grammar,n=t.parameters,r=t.getCtx,u=r(),s=c["default"](e),l=new d["default"](o(n),a(r,s));i(u.canvas,l)}function i(t,e){var n=!1,r=null;t.addEventListener("mousedown",function(t){n=!0}),window.addEventListener("mousemove",function(t){var a={x:t.pageX,y:t.pageY};if(n&&r){var o=g["default"].diff(a,r);e.dispatch({type:"changeAngles",payload:{angleA:(o.x+o.y)/1e3,angleB:(o.x-o.y)/1e3}})}r=a}),window.addEventListener("mouseup",function(t){n=!1}),t.addEventListener("wheel",function(t){var n=-t.deltaY/Math.abs(t.deltaY);e.dispatch({type:"changeGeneration",payload:n})})}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e["default"]=u;var l=n(2),c=r(l),f=n(4),d=r(f),p=n(3),g=r(p);t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n){var r=[];return t.forEach(function(t,a,o){var u=[];if(e.hasOwnProperty(t)){var i=e[t];u="function"==typeof i?i(o[a-1],o[a+1]):i}else{if(-1===n.indexOf(t))throw Error("Unknown token: "+t);u=t}r=r.concat(u)}),r}function u(t,e){for(var n=t.axiom,r=Object.keys(t.tokensAlphabet);e--;)n=o(n,t.rules,r);return n}function i(t,e){var n=t.replace(/\s/g,"").split(":"),r=f(n,2),a=r[0],o=r[1],u=e[a];return o=o?o.split(","):[],{action:u,args:o}}function s(t,e){var n={};for(var r in t)for(var a=t[r],o=a.length;o--;){var u=a[o];n[u]=i(u,e)}return n}function l(t,e,n,r,o,u){var i=d({angle:0,point:{x:0,y:0}},t);n.forEach(function(t){r[t].forEach(function(t){var n=o[t],r=n.action,s=n.args;s=s.map(function(t){return u[t]}),i=r.apply(void 0,[i,e].concat(a(s)))})})}function c(t){var e=t.tokensAlphabet,n=v[t.type],r=s(e,n);return function(n){var a=u(t,n);return function(t,n,o){l(n,t,a,e,r,o)}}}Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function t(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var u,i=t[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(s){a=!0,o=s}finally{try{!r&&i["return"]&&i["return"]()}finally{if(a)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e["default"]=c;var p=n(3),g=r(p),v={curve:{save:function(t,e){return d({},t,{prevState:t})},restore:function(t,e){return d({},t.prevState)},rotate:function(t,e,n){return d({},t,{angle:t.angle+n})},color:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?"black":arguments[2];return e.strokeStyle=n,t},forward:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],r=g["default"].fromPolar(1,t.angle),a=d({},t,{point:g["default"].sum(t.point,r)});return n&&(e.beginPath(),e.moveTo(t.point.x,t.point.y),e.lineTo(a.point.x,a.point.y),e.stroke()),a}}};t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={fromPolar:function(t,e){return{x:t*Math.cos(e),y:t*Math.sin(e)}},sum:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},diff:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},scalarMul:function(t,e){return{x:t.x*e,y:t.y*e}}},t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e,r){n(this,t),this.reducer=e,this.onChange=r||function(){},this.dispatch({type:"init"})}return r(t,[{key:"dispatch",value:function(t){this.state=this.reducer(this.state,t)}},{key:"state",get:function(){return this._state},set:function(t){if(t!==this._state){var e=this._state||{},n=t;this._state=n,this.onChange(n,e)}}}]),t}();e["default"]=a,t.exports=e["default"]}]);
//# sourceMappingURL=bundle.js.map